import{d as x,a as V,u as y,r as m,c as _,b as r,g as h,o as k,f as l,E as C,Q as S,R as B,j as e,T as c,i as I,I as F,k as L,B as d,D as R}from"./index-ff565f42.js";import{u as $,a as p}from"./vee-validate.esm-c0140e7f.js";import{_ as j}from"./BackButton.vue_vue_type_script_setup_true_lang-5839fa1f.js";const q=d("div",{class:"text-h6 font-weight-bold"},"Вход",-1),z=d("div",{class:"text-body-2 w-100 cursor-pointer font-weight-semibold pa-1"}," восстановить пароль ",-1),A=x({__name:"LoginPage",setup(M){document.title="Авторизация — Ищу наставника";let f=V(),g=y();const{meta:w,handleSubmit:v,handleReset:N}=$({validationSchema:{password(t){return(t==null?void 0:t.length)>=6?!0:"нужно 6 символов"},email(t){return/^[a-z.-.0-9]+@[a-z.-]+\.[a-z]+$/i.test(t)?!0:"неправильный формат email"}}}),n=p("email"),i=p("password");let s=m(!1),u=m(!1);const b=v(async t=>{u.value=!0;let a=await f.login(t.email,t.password);u.value=!1,a!=null&&a.success&&(localStorage.getItem("requestedLink")?(window.location.href=localStorage.getItem("requestedLink"),localStorage.removeItem("requestedLink")):window.location.href="/")});return(t,a)=>(k(),_(h,{class:"align-start"},{default:r(()=>[l(j),l(R,{cols:"12",xs:"12",md:"6",lg:"5",class:"mt-4 ma-auto"},{default:r(()=>[l(C,{class:"d-flex flex-column justify-center align-center text-center w-100 pl-6 pr-6 pt-4 pb-6"},{default:r(()=>[q,l(S,{onSubmit:B(e(b),["prevent"]),class:"d-flex mt-3 flex-column align-center justify-center w-100"},{default:r(()=>[l(c,{label:"Email",type:"email",placeholder:"vasya@ya.ru",modelValue:e(n).value.value,"onUpdate:modelValue":a[0]||(a[0]=o=>e(n).value.value=o),"error-messages":e(n).errorMessage.value,variant:"underlined",class:"w-100"},null,8,["modelValue","error-messages"]),l(c,{label:"Пароль",modelValue:e(i).value.value,"onUpdate:modelValue":a[1]||(a[1]=o=>e(i).value.value=o),"append-inner-icon":e(s)?"mdi-eye":"mdi-eye-off","onClick:appendInner":a[2]||(a[2]=o=>I(s)?s.value=!e(s):s=!e(s)),type:e(s)?"text":"password","error-messages":e(i).errorMessage.value,variant:"underlined",class:"w-100"},null,8,["modelValue","append-inner-icon","type","error-messages"]),l(F,{type:"submit",disabled:!e(w).valid,color:"accent",class:"mt-4"},{default:r(()=>[L("Войти")]),_:1},8,["disabled"])]),_:1},8,["onSubmit"]),d("div",{onClick:a[3]||(a[3]=o=>e(g).push("/registration")),class:"text-body-2 w-100 cursor-pointer font-weight-semibold pa-1 mt-4"}," регистрация "),z]),_:1})]),_:1})]),_:1}))}});export{A as default};
