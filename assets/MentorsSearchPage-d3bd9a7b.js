import{_ as N}from"./MainTitle.vue_vue_type_script_setup_true_lang-5e97d381.js";import{_ as E}from"./MentorEntry.vue_vue_type_style_index_0_lang-54ec128a.js";import{d as M,a as U,w as p,r as h,c as f,b as n,g as A,o as _,f as m,k as x,D as w,H as y,j as i,i as S,C as F,B as R,S as T,p as q,q as D,F as H,v as L}from"./index-a7c02cab.js";import{u as P}from"./school-bdd1772f.js";import{u as z}from"./town-8d6ffef6.js";import{u as G}from"./entry-0acbcb40.js";import"./BackButton.vue_vue_type_script_setup_true_lang-b11ea951.js";import"./EntryContainer-86434311.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./EntryService-ef81a948.js";const I={class:"mt-8 entries-container"},le=M({__name:"MentorsSearchPage",async setup(J){let e,r;document.title="Поиск наставников — Ищу наставника";let c=U().getUser();function v(t){for(var l,a,d=t.length-1;d>0;d--)l=Math.floor(Math.random()*(d+1)),a=t[l],t[l]=t[d],t[d]=a;return t}let C=z(),k=P(),V=G(),g=([e,r]=p(()=>C.get_all()),e=await e,r(),e),b=([e,r]=p(()=>k.get_all()),e=await e,r(),e),o=h(c?c.town:g.find(t=>t.name==="Глазов")),s=h(c?c.school:{name:"Все",_id:"all"}),u=h(([e,r]=p(()=>V.get("mentor",o.value._id,s.value._id)),e=await e,r(),e));v(u.value);async function B(){u.value=await V.get("mentor",o.value._id,s.value._id),v(u.value)}function j(){return b.filter(t=>t.town._id===o.value._id)}return(t,l)=>(_(),f(A,null,{default:n(()=>[m(N,null,{default:n(()=>[x("Поиск наставников")]),_:1}),m(F,{class:"ma-0 pa-0 mt-4",style:{gap:"12px"}},{default:n(()=>[m(w,{cols:"12",md:"4",sm:"8",xs:"12",class:"ml-0 pa-0"},{default:n(()=>[m(y,{label:"Город",modelValue:i(o),"onUpdate:modelValue":l[0]||(l[0]=a=>S(o)?o.value=a:o=a),items:i(g),"item-title":"name","return-object":"",variant:"solo","hide-details":""},null,8,["modelValue","items"])]),_:1}),m(w,{cols:"12",md:"4",sm:"8",xs:"12",class:"ma-0 pa-0"},{default:n(()=>[m(y,{label:"Школа",modelValue:i(s),"onUpdate:modelValue":[l[1]||(l[1]=a=>S(s)?s.value=a:s=a),B],items:[{name:"Все",_id:"all"},...j()],"item-title":"name","return-object":"",variant:"solo","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),R("div",I,[(_(),f(T,null,{default:n(()=>[(_(!0),q(H,null,D(i(u),a=>(_(),f(E,{key:a._id,entry:a,show_location:i(s)._id==="all"},null,8,["entry","show_location"]))),128))]),_:1}))]),i(u).length===0?(_(),f(w,{key:0,cols:"12",sm:"6",xs:"12",class:"text-h6 ma-auto font-weight-medium mt-4 text-center"},{default:n(()=>[x(" Записей нет, или вы на всё откликнулись ")]),_:1})):L("",!0)]),_:1}))}});export{le as default};
