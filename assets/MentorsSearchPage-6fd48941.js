import{_ as A}from"./MainTitle.vue_vue_type_script_setup_true_lang-e34300b7.js";import{_ as N}from"./MentorEntry.vue_vue_type_style_index_0_lang-a4d399d5.js";import{d as j,a as q,H as F,r as d,w as R,I as g,c,e as n,g as T,o as i,f as r,j as U,D as y,J as k,l as t,k as C,A as D,h as H,S as I,B as f,C as J,F as L,v as S}from"./index-4f6c5d65.js";import{u as M}from"./school-9a21f72d.js";import{u as P}from"./entry-7a05a159.js";import{_ as B}from"./lodash-57ff8d49.js";import"./BackButton.vue_vue_type_script_setup_true_lang-603e5d2f.js";import"./Slave.vue_vue_type_script_setup_true_lang-cdf8ecb2.js";import"./EntryContainer-a8530ab8.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./EntryService-e6d5ed51.js";const z={class:"mt-8 entries-container"},G={key:0,class:"w-100 text-center text-h6 font-weight-medium"},K={key:1,class:"w-100 text-center text-h6 font-weight-medium"},oe=j({__name:"MentorsSearchPage",async setup(O){let u,p;document.title="Поиск наставников — Ищу наставника";let E=q(),h=M(),b=P(),{towns:w}=F(),m=E.user,a=d(m?m.town:w.find(o=>o.name==="Глазов")),e=d(m?m.school:{name:"Все",_id:"all"}),_=d([]);async function v(){_.value=e.value?await b.get("mentor",a.value._id,e.value._id):[]}v();let x=d(([u,p]=R(()=>h.get_all_in_town(a.value._id)),u=await u,p(),u));return g(a,async(o,l)=>{B.isEqual(o,l)||(e.value=null,x.value=await h.get_all_in_town(a.value._id))}),g(e,(o,l)=>{B.isEqual(o,l)||v()}),(o,l)=>(i(),c(T,null,{default:n(()=>[r(A,null,{default:n(()=>[U("Поиск наставников")]),_:1}),r(D,{class:"mt-4",style:{margin:"-6px"}},{default:n(()=>[r(y,{cols:"12",md:"4",sm:"8",xs:"12",style:{padding:"6px"}},{default:n(()=>[r(k,{label:"Город",modelValue:t(a),"onUpdate:modelValue":l[0]||(l[0]=s=>C(a)?a.value=s:a=s),items:t(w),"item-title":"name","auto-select-first":"","return-object":"",variant:"solo","hide-details":""},null,8,["modelValue","items"])]),_:1}),r(y,{cols:"12",md:"4",sm:"8",xs:"12",style:{padding:"6px"}},{default:n(()=>[r(k,{label:"Школа",modelValue:t(e),"onUpdate:modelValue":l[1]||(l[1]=s=>C(e)?e.value=s:e=s),items:[{name:"Все",_id:"all"},...t(x)],"item-title":"name","auto-select-first":"","return-object":"",variant:"solo","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),H("div",z,[(i(),c(I,null,{default:n(()=>[(i(!0),f(L,null,J(t(_),s=>{var V;return i(),c(N,{key:s._id,entry:s,show_location:((V=t(e))==null?void 0:V._id)==="all"},null,8,["entry","show_location"])}),128))]),_:1}))]),t(e)&&t(_).length===0?(i(),f("div",G," Пусто ")):S("",!0),t(e)?S("",!0):(i(),f("div",K," Выберите школу "))]),_:1}))}});export{oe as default};
