import{_ as N}from"./MainTitle.vue_vue_type_script_setup_true_lang-5e97d381.js";import{_ as E}from"./MentorEntry.vue_vue_type_style_index_0_lang-54ec128a.js";import{d as U,a as A,w as p,r as h,c as f,b as n,g as F,o as _,f as i,k as x,D as w,H as y,j as m,i as S,C as L,B as M,S as R,p as T,q,F as D,v as H}from"./index-a7c02cab.js";import{u as P}from"./school-bdd1772f.js";import{u as z}from"./town-8d6ffef6.js";import{u as G}from"./entry-0acbcb40.js";import"./BackButton.vue_vue_type_script_setup_true_lang-b11ea951.js";import"./EntryContainer-86434311.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./EntryService-ef81a948.js";const I={class:"mt-8 entries-container"},le=U({__name:"LessonsSearchPage",async setup(J){let e,u;document.title="Поиск уроков — Ищу наставника";let c=A().getUser();function v(t){for(var l,a,d=t.length-1;d>0;d--)l=Math.floor(Math.random()*(d+1)),a=t[l],t[l]=t[d],t[d]=a;return t}let C=z(),k=P(),V=G(),g=([e,u]=p(()=>C.get_all()),e=await e,u(),e),b=([e,u]=p(()=>k.get_all()),e=await e,u(),e),s=h(c?c.town:g.find(t=>t.name==="Глазов")),o=h(c?c.school:{name:"Все",_id:"all"}),r=h(([e,u]=p(()=>V.get("lesson",s.value._id,o.value._id)),e=await e,u(),e));v(r.value);async function B(){r.value=await V.get("lesson",s.value._id,o.value._id),v(r.value)}function j(){return b.filter(t=>t.town._id===s.value._id)}return(t,l)=>(_(),f(F,null,{default:n(()=>[i(N,null,{default:n(()=>[x("Поиск уроков")]),_:1}),i(L,{class:"ma-0 pa-0 mt-4",style:{gap:"12px"}},{default:n(()=>[i(w,{cols:"12",md:"4",sm:"8",xs:"12",class:"ml-0 pa-0"},{default:n(()=>[i(y,{label:"Город",modelValue:m(s),"onUpdate:modelValue":l[0]||(l[0]=a=>S(s)?s.value=a:s=a),items:m(g),"item-title":"name","return-object":"",variant:"solo","hide-details":""},null,8,["modelValue","items"])]),_:1}),i(w,{cols:"12",md:"4",sm:"8",xs:"12",class:"ma-0 pa-0"},{default:n(()=>[i(y,{label:"Школа",modelValue:m(o),"onUpdate:modelValue":[l[1]||(l[1]=a=>S(o)?o.value=a:o=a),B],items:[{name:"Все",_id:"all"},...j()],"item-title":"name","return-object":"",variant:"solo","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),M("div",I,[(_(),f(R,null,{default:n(()=>[(_(!0),T(D,null,q(m(r),a=>(_(),f(E,{key:a._id,entry:a,show_location:m(o)._id==="all"},null,8,["entry","show_location"]))),128))]),_:1}))]),m(r).length===0?(_(),f(w,{key:0,cols:"12",sm:"6",xs:"12",class:"text-h6 ma-auto font-weight-medium mt-4 text-center"},{default:n(()=>[x(" Уроков нет, или вы на всё откликнулись ")]),_:1})):H("",!0)]),_:1}))}});export{le as default};
